{"ast":null,"code":"/*\nGoal: generate faces that are parameterized by at least 3 variables\n\nThis one didn't really grab me too much creatively, - I think I got bogged down in the learning.\nIt was a great learning exercise though, I got quite a good crash course in drawing shapes with p5,\nand using Perlin noise to make adjustments at the point level to give the shapes a hand-drawn feel.\n\nPress any key for a fun surprise!\n\nA fun stretch goal for this one for the future would be to use real faces. Like, you take a photo of your face,\nthe program parametrically warps it. This is much more complicated though, would need to learn some computer vision\ntechniques lol\n\n*/\n\nfunction get_point_with_perlin_noise(p5, xCoord, yCoord, noiseFactor) {\n  if (noiseFactor === undefined) {\n    noiseFactor = Math.random() * 4;\n  }\n  // Apply Perlin noise to add smooth randomness to the vertex positions\n  const noiseVal = p5.noise(xCoord * 0.01, yCoord * 0.01, noiseFactor * 0.01);\n  const offsetX = p5.map(noiseVal, 0, 1, -15, 15);\n  const offsetY = p5.map(noiseVal, 0, 1, -15, 15);\n  return {\n    x: xCoord + offsetX,\n    y: yCoord + offsetY\n  };\n}\nfunction draw_perlin_arc(p5, centerX, centerY, size, noiseFactor, start_angle, end_angle) {\n  const numPoints = 100;\n  let outline_points = [];\n  for (let i = 0; i <= numPoints; i++) {\n    const angle = p5.map(i, 0, numPoints, start_angle, end_angle);\n    let xCoord = centerX + size * p5.cos(angle);\n    let yCoord = centerY + size * p5.sin(angle);\n    outline_points[i] = get_point_with_perlin_noise(p5, xCoord, yCoord, noiseFactor);\n  }\n  p5.beginShape();\n  for (let i = 0; i <= numPoints; i++) {\n    const {\n      x,\n      y\n    } = outline_points[i];\n    p5.vertex(x, y);\n  }\n  p5.endShape();\n}\nfunction draw_perlin_circle(p5, centerX, centerY, size, noiseFactor) {\n  draw_perlin_arc(p5, centerX, centerY, size, noiseFactor, 0, p5.TWO_PI);\n}\nfunction draw_perlin_line(p5, startX, startY, endX, endY) {\n  const numPoints = 100;\n  let outline_points = [];\n  for (let i = 0; i <= numPoints; i++) {\n    let xCoord = p5.lerp(startX, endX, p5.map(i, 0, numPoints, 0.0, 1.0));\n    let yCoord = p5.lerp(startY, endY, p5.map(i, 0, numPoints, 0.0, 1.0));\n    outline_points[i] = get_point_with_perlin_noise(p5, xCoord, yCoord);\n  }\n  p5.beginShape();\n  for (let i = 0; i <= numPoints; i++) {\n    const {\n      x,\n      y\n    } = outline_points[i];\n    p5.vertex(x, y);\n  }\n  p5.endShape();\n}\nclass Eyes {\n  constructor(centerX, centerY) {\n    this.right_eye_points = [];\n    this.left_eye_points = [];\n    this.eye_saturation = 60;\n    this.eye_brightness = 75;\n    this.centerX = centerX;\n    this.centerY = centerY;\n    this.eye_distance = Math.floor(Math.random() * 10 + 40);\n    this.eye_size = Math.floor(Math.random() * 10 + 25);\n    this.eye_coords = {\n      right: {\n        x: this.centerX - this.eye_distance,\n        y: this.centerY - 25\n      },\n      left: {\n        x: this.centerX + this.eye_distance,\n        y: this.centerY - 25\n      }\n    };\n    this.eye_hue = Math.floor(Math.random() * (300 - 150) + 150);\n  }\n  draw(p5) {\n    if (third_eye) {\n      this.draw_third_eye(p5);\n      return;\n    }\n    p5.stroke(0);\n    draw_perlin_line(p5, this.centerX, this.centerY - 33, this.centerX, this.centerY - 79);\n    p5.noStroke();\n    p5.fill(\"white\");\n    p5.draw_perlin_circle(p5, this.eye_coords.right.x, this.eye_coords.right.y, this.eye_size, 0);\n    p5.draw_perlin_circle(p5, this.eye_coords.left.x, this.eye_coords.left.y, this.eye_size, 0);\n    p5.noStroke();\n    p5.fill(this.eye_hue, this.eye_saturation, this.eye_brightness);\n    draw_perlin_circle(p5, this.eye_coords.right.x, this.eye_coords.right.y, this.eye_size / 2, 0);\n    draw_perlin_circle(p5, this.eye_coords.left.x, this.eye_coords.left.y, this.eye_size / 2, 0);\n    p5.fill(\"black\");\n    draw_perlin_circle(p5, this.eye_coords.right.x, this.eye_coords.right.y, this.eye_size / 3, 0);\n    draw_perlin_circle(p5, this.eye_coords.left.x, this.eye_coords.left.y, this.eye_size / 3, 0);\n    p5.fill(\"white\");\n  }\n  draw_third_eye(p5) {\n    p5.stroke(0);\n    draw_perlin_arc(p5, this.eye_coords.right.x, this.eye_coords.right.y, this.eye_size, Math.random() * 4, 0, p5.PI);\n    draw_perlin_arc(p5, this.eye_coords.left.x, this.eye_coords.left.y, this.eye_size, Math.random() * 4, 0, p5.PI);\n    p5.noStroke();\n    p5.fill(\"white\");\n    draw_perlin_arc(p5, this.centerX - this.eye_size / 2, this.centerY - 55, this.eye_size, 0, 5 * p5.PI / 3, p5.TWO_PI + p5.PI / 3);\n    draw_perlin_arc(p5, this.centerX + this.eye_size / 2, this.centerY - 55, this.eye_size, 0, 2 * p5.PI / 3, 4 * p5.PI / 3);\n    p5.noStroke();\n    p5.fill(eye_hue, this.eye_saturation, this.eye_brightness);\n    draw_perlin_circle(p5, this.centerX, this.centerY - 56, this.eye_size / 2, 0);\n    p5.stroke(0);\n    p5.fill(\"black\");\n    draw_perlin_circle(p5, this.centerX, this.centerY - 56, this.eye_size / 4, 0);\n    p5.fill(\"white\");\n  }\n}\nclass Face {\n  constructor(p5, centerX, centerY) {\n    this.face_points = [];\n    this.size = 100;\n    this.centerX = centerX;\n    this.centerY = centerY;\n    this.face_points = this.face_outline_points();\n    this.skin_tone = p5.color(Math.floor(Math.random() * 40), Math.floor(Math.random() * 30), Math.floor(Math.random() * 40 + 60));\n    this.eyes = new Eyes(centerX, centerY);\n    this.mouthControlPoint = {\n      x: this.centerX,\n      y: this.centerY + Math.floor(Math.random() * 90)\n    };\n    this.mouthHeight = Math.floor(Math.random() * 10) + 35;\n  }\n  face_outline_points(p5) {\n    const radius = 100;\n    const numPoints = 100;\n    let points = [];\n    let taperMin = p5.map(Math.random(), 0, 1, 0.8, 1.25);\n    for (let i = 0; i < numPoints; i++) {\n      const angle = p5.map(i, 0, numPoints, 0, p5.TWO_PI);\n      let taperFactor = 1;\n      if (i < numPoints / 2) {\n        if (i <= numPoints / 8) {\n          taperFactor = p5.map(i, 0, numPoints * 1 / 8, 1, taperMin);\n        } else if (i <= numPoints / 4) {\n          taperFactor = p5.map(i, numPoints / 8, numPoints / 4, taperMin, 1);\n        } else if (i <= numPoints * (3 / 8)) {\n          taperFactor = p5.map(i, numPoints / 4, numPoints * (3 / 8), 1, taperMin);\n        } else if (i >= numPoints * (3 / 8)) {\n          taperFactor = p5.map(i, numPoints * (3 / 8), numPoints / 2, taperMin, 1);\n        }\n      }\n      let xCoord = this.centerX + radius * p5.cos(angle) * taperFactor;\n      let yCoord = this.centerY + radius * p5.sin(angle) * taperFactor;\n      points[i] = get_point_with_perlin_noise(p5, xCoord, yCoord, 2);\n    }\n    return points;\n  }\n  draw_face_outline(p5) {\n    p5.fill(this.skin_tone);\n    p5.noStroke();\n    p5.beginShape();\n    for (let i = 0; i < this.face_points.length; i++) {\n      const {\n        x,\n        y\n      } = this.face_points[i];\n      p5.vertex(x, y);\n    }\n    p5.endShape(CLOSE);\n  }\n  mouth(p5) {\n    // if (third_eye) {\n    //   fill(\"black\");\n    //   draw_perlin_circle(this.centerX, this.centerY + 50, 30);\n    //   fill(\"white\");\n    //   return;\n    // }\n    p5.stroke(0);\n    p5.fill(this.skin_tone);\n    p5.beginShape();\n    p5.vertex(this.centerX - this.mouthHeight, this.centerY + this.mouthHeight);\n    p5.quadraticVertex(this.mouthControlPoint.x, this.mouthControlPoint.y, this.centerX + this.mouthHeight, this.centerY + this.mouthHeight);\n    p5.endShape();\n  }\n  hair() {}\n  draw_face(p5) {\n    this.draw_face_outline(p5);\n    this.eyes.draw(p5);\n    this.mouth(p5);\n  }\n}\nlet third_eye = false,\n  eye_hue,\n  gradient_position = 0.0,\n  up = true;\nlet testpath, svg, ctx, canvas, img;\nlet faces = [];\nfunction setup(p5) {\n  canvas = p5.createCanvas(2000, 2000);\n  p5.colorMode(HSB);\n  let centerX = 200,\n    centerY = 200;\n  for (let i = 0; i < 4; i++) {\n    faces[i] = new Face(centerX, centerY);\n    centerX += 250;\n  }\n  let eye_hue = Math.floor(Math.random() * 360);\n}\nasync function draw(p5) {\n  if (third_eye) {\n    eye_hue = lerp(0, 360, gradient_position);\n    if (up) {\n      gradient_position += 0.004;\n    } else {\n      gradient_position -= 0.004;\n    }\n    if (gradient_position <= 0.0 || gradient_position >= 1.0) {\n      up = !up;\n    }\n    p5.background(color(eye_hue, 13, 98));\n  } else {\n    p5.background(color(286, 23, 98));\n  }\n\n  //draw 4 randomly proportioned faces\n  for (let j = 0; j < faces.length; j++) {\n    faces[j].draw_face();\n  }\n}\nfunction keyPressed() {\n  third_eye = !third_eye;\n}","map":{"version":3,"names":["get_point_with_perlin_noise","p5","xCoord","yCoord","noiseFactor","undefined","Math","random","noiseVal","noise","offsetX","map","offsetY","x","y","draw_perlin_arc","centerX","centerY","size","start_angle","end_angle","numPoints","outline_points","i","angle","cos","sin","beginShape","vertex","endShape","draw_perlin_circle","TWO_PI","draw_perlin_line","startX","startY","endX","endY","lerp","Eyes","constructor","right_eye_points","left_eye_points","eye_saturation","eye_brightness","eye_distance","floor","eye_size","eye_coords","right","left","eye_hue","draw","third_eye","draw_third_eye","stroke","noStroke","fill","PI","Face","face_points","face_outline_points","skin_tone","color","eyes","mouthControlPoint","mouthHeight","radius","points","taperMin","taperFactor","draw_face_outline","length","CLOSE","mouth","quadraticVertex","hair","draw_face","gradient_position","up","testpath","svg","ctx","canvas","img","faces","setup","createCanvas","colorMode","HSB","background","j","keyPressed"],"sources":["/Users/katieadamsky/katie-adamsky.github.io/site/src/pages/projects/faces/sketch.js"],"sourcesContent":["/*\nGoal: generate faces that are parameterized by at least 3 variables\n\nThis one didn't really grab me too much creatively, - I think I got bogged down in the learning.\nIt was a great learning exercise though, I got quite a good crash course in drawing shapes with p5,\nand using Perlin noise to make adjustments at the point level to give the shapes a hand-drawn feel.\n\nPress any key for a fun surprise!\n\nA fun stretch goal for this one for the future would be to use real faces. Like, you take a photo of your face,\nthe program parametrically warps it. This is much more complicated though, would need to learn some computer vision\ntechniques lol\n\n*/\n\n\nfunction get_point_with_perlin_noise(p5, xCoord, yCoord, noiseFactor) {\n    if (noiseFactor === undefined) {\n      noiseFactor = Math.random()*4;\n    }\n    // Apply Perlin noise to add smooth randomness to the vertex positions\n    const noiseVal = p5.noise(xCoord * 0.01, yCoord * 0.01, noiseFactor*0.01);\n    const offsetX = p5.map(noiseVal, 0, 1, -15, 15);\n    const offsetY = p5.map(noiseVal, 0, 1, -15, 15);\n    return {x: xCoord+offsetX, y: yCoord+offsetY};\n  }\n  \n  function draw_perlin_arc(p5, centerX, centerY, size, noiseFactor, start_angle, end_angle) {\n      const numPoints = 100;\n      let outline_points = [];\n      for (let i=0; i <= numPoints; i++) {\n        const angle = p5.map(i, 0, numPoints, start_angle, end_angle);\n        let xCoord = centerX + size * p5.cos(angle);\n        let yCoord = centerY + size * p5.sin(angle);\n        \n        outline_points[i] = get_point_with_perlin_noise(p5, xCoord, yCoord, noiseFactor);\n      }\n  \n      p5.beginShape();\n      for(let i = 0; i <= numPoints; i++) {\n        const { x, y } = outline_points[i];\n        p5.vertex(x, y);\n      }\n      p5.endShape();\n  }\n  \n  \n    function draw_perlin_circle(p5, centerX, centerY, size, noiseFactor) {\n      draw_perlin_arc(p5, centerX, centerY, size, noiseFactor, 0, p5.TWO_PI);\n    }\n  \n    function draw_perlin_line(p5, startX, startY, endX, endY) {\n      const numPoints = 100;\n      let outline_points = [];\n      for (let i=0; i <= numPoints; i++) {\n        let xCoord = p5.lerp(startX, endX, p5.map(i, 0, numPoints, 0.0, 1.0));\n        let yCoord = p5.lerp(startY, endY, p5.map(i, 0, numPoints, 0.0, 1.0));\n        \n        outline_points[i] = get_point_with_perlin_noise(p5, xCoord, yCoord);\n      }\n  \n      p5.beginShape();\n      for(let i = 0; i <= numPoints; i++) {\n        const { x, y } = outline_points[i];\n        p5.vertex(x, y);\n      }\n      p5.endShape();\n    }\n  \n  class Eyes {\n    centerX;\n    centerY;\n    right_eye_points = [];\n    left_eye_points = [];\n    eye_coords;\n    eye_hue;\n    eye_saturation = 60;\n    eye_brightness = 75;\n  \n    constructor(centerX, centerY) {\n      this.centerX = centerX;\n      this.centerY = centerY;\n      this.eye_distance = Math.floor(Math.random()*10 + 40);\n      this.eye_size = Math.floor(Math.random()*10+25);\n      this.eye_coords = {\n        right: {x: this.centerX - this.eye_distance, y: this.centerY - 25},\n        left: {x: this.centerX + this.eye_distance, y: this.centerY - 25},\n      }\n      this.eye_hue = Math.floor(Math.random()*(300-150)+150);\n    }\n  \n  \n    draw(p5) {\n      if (third_eye) {\n        this.draw_third_eye(p5);\n        return;\n      }\n      p5.stroke(0);\n      draw_perlin_line(p5, this.centerX, this.centerY - 33, this.centerX, this.centerY - 79);\n      p5.noStroke();\n      p5.fill(\"white\");\n      p5.draw_perlin_circle(p5, this.eye_coords.right.x, this.eye_coords.right.y, this.eye_size,0);\n      p5.draw_perlin_circle(p5, this.eye_coords.left.x, this.eye_coords.left.y, this.eye_size,0);\n  \n      p5.noStroke();\n  \n      p5.fill(this.eye_hue, this.eye_saturation, this.eye_brightness);\n      draw_perlin_circle(p5, this.eye_coords.right.x, this.eye_coords.right.y, this.eye_size /2, 0);\n      draw_perlin_circle(p5, this.eye_coords.left.x, this.eye_coords.left.y, this.eye_size /2, 0);\n  \n  \n      p5.fill(\"black\");\n      draw_perlin_circle(p5, this.eye_coords.right.x, this.eye_coords.right.y, this.eye_size /3, 0);\n      draw_perlin_circle(p5, this.eye_coords.left.x, this.eye_coords.left.y, this.eye_size /3, 0);\n      p5.fill(\"white\");\n    }\n  \n    draw_third_eye(p5) {\n      p5.stroke(0);\n      draw_perlin_arc(p5, this.eye_coords.right.x, this.eye_coords.right.y, this.eye_size, Math.random()*4, 0, p5.PI);\n      draw_perlin_arc(p5, this.eye_coords.left.x, this.eye_coords.left.y, this.eye_size, Math.random()*4, 0, p5.PI);\n      p5.noStroke();\n  \n      p5.fill(\"white\");\n      draw_perlin_arc(p5, this.centerX-this.eye_size/2, this.centerY-55, this.eye_size, 0, 5*p5.PI/3, p5.TWO_PI+p5.PI/3);\n      draw_perlin_arc(p5, this.centerX+this.eye_size/2, this.centerY-55, this.eye_size, 0, 2*p5.PI/3, 4*p5.PI/3);\n      p5.noStroke();\n  \n      p5.fill(eye_hue, this.eye_saturation, this.eye_brightness);\n      draw_perlin_circle(p5, this.centerX, this.centerY - 56, this.eye_size /2, 0);\n      p5.stroke(0);\n  \n      p5.fill(\"black\");\n      draw_perlin_circle(p5, this.centerX, this.centerY - 56, this.eye_size /4, 0);\n      p5.fill(\"white\");\n  \n    }\n  }\n  \n  class Face {\n    face_points = [];\n    size = 100;\n    centerX;\n    centerY;\n    eyes;\n    mustache;\n    mouthControlPoint;\n    mouthHeight;\n    skin_tone;\n  \n    constructor(p5, centerX, centerY) {\n      this.centerX = centerX;\n      this.centerY = centerY;\n      this.face_points = this.face_outline_points();\n      this.skin_tone = p5.color(Math.floor(Math.random()*40), Math.floor(Math.random()*30), Math.floor(Math.random()*40+60));\n  \n      this.eyes = new Eyes(centerX, centerY);\n      this.mouthControlPoint = {x: this.centerX, y: this.centerY + Math.floor(Math.random()*90)}\n      this.mouthHeight = Math.floor(Math.random()*10) + 35;\n    }\n  \n    face_outline_points(p5) {\n      const radius = 100;\n      const numPoints = 100;\n      let points = [];\n      let taperMin = p5.map(Math.random(), 0, 1, 0.8, 1.25);\n      \n      for (let i = 0; i < numPoints; i++) {\n        const angle = p5.map(i, 0, numPoints, 0, p5.TWO_PI);\n        let taperFactor = 1;\n        if (i < (numPoints/2)) {\n          if (i <= numPoints/8) {\n            taperFactor = p5.map(i, 0, numPoints*1/8, 1, taperMin);\n          } else if (i <= numPoints/4) {\n            taperFactor = p5.map(i, numPoints/8, numPoints/4, taperMin, 1);\n          } else if (i <= numPoints *(3/8)) {\n            taperFactor = p5.map(i, numPoints/4, numPoints*(3/8), 1, taperMin);\n          }\n          else if(i >= numPoints*(3/8)) {\n            taperFactor = p5.map(i, numPoints*(3/8), numPoints/2, taperMin, 1);\n          } \n        }\n        let xCoord = this.centerX + radius * p5.cos(angle)*taperFactor;\n        let yCoord = this.centerY + radius * p5.sin(angle)*taperFactor;\n  \n        points[i] = get_point_with_perlin_noise(p5, xCoord, yCoord, 2);\n      }\n      return points;\n    }\n  \n    draw_face_outline(p5) {\n      p5.fill(this.skin_tone);\n      p5.noStroke();\n      p5.beginShape();\n      for (let i = 0; i < this.face_points.length; i++) {\n        const { x, y } = this.face_points[i];\n        p5.vertex(x, y);\n      }\n      p5.endShape(CLOSE);\n    }\n  \n    mouth(p5) {\n      // if (third_eye) {\n      //   fill(\"black\");\n      //   draw_perlin_circle(this.centerX, this.centerY + 50, 30);\n      //   fill(\"white\");\n      //   return;\n      // }\n      p5.stroke(0);\n      p5.fill(this.skin_tone);\n      p5.beginShape();\n      p5.vertex(this.centerX - this.mouthHeight, this.centerY + this.mouthHeight);\n      p5.quadraticVertex(this.mouthControlPoint.x, this.mouthControlPoint.y, this.centerX+this.mouthHeight, this.centerY+this.mouthHeight);\n      p5.endShape();\n    }\n  \n    hair() {\n  \n    }\n  \n    draw_face(p5) {\n      this.draw_face_outline(p5);\n      this.eyes.draw(p5);\n      this.mouth(p5);\n    }\n  \n  }\n  \n  let third_eye = false, eye_hue, gradient_position = 0.0, up = true;\n  let testpath, svg, ctx, canvas, img;\n  let faces = [];\n  \n  function setup(p5) {\n    canvas = p5.createCanvas(2000, 2000);\n    p5.colorMode(HSB); \n  \n    let centerX = 200, centerY = 200;\n    for (let i=0; i<4; i++) {\n      faces[i] = new Face(centerX, centerY);\n      centerX += 250;\n    }\n    let eye_hue = Math.floor(Math.random()*360);\n  }\n  \n  async function draw(p5) {\n    if (third_eye) {\n      eye_hue = lerp(0, 360, gradient_position);\n      if (up) {\n        gradient_position += 0.004;\n      } else {\n        gradient_position -= 0.004;\n      }\n      if (gradient_position <= 0.0 || gradient_position >= 1.0) {\n        up = !up;\n      }\n      p5.background(color(eye_hue, 13, 98));\n    } else {\n      p5.background(color(286, 23, 98));\n    }\n  \n  \n    //draw 4 randomly proportioned faces\n    for(let j = 0; j < faces.length; j++) {\n      faces[j].draw_face();\n    }\n  }\n  \n  function keyPressed() {\n    third_eye = !third_eye;\n  }\n  \n  \n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}